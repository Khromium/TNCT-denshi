mp4ex04.txt


1.課題
8bitスイッチで，4つのスイッチをON，残りの４つのスイッチをOFFにしなさい。
5.3のプログラムを動かして，テスタとターミナルの画面を使って，
8ビットスイッチのON-OFFの状態が電圧として見え，マイコン内部ではどのように見えているか
調べなさい。
本ページ下部の「参考１ H8ピン配置」を参照しなさい。
どのように検証したか（テスタの赤黒を何処に触れたのかを含む），どのような結果が得られたか
表にして報告しなさい。


2.使用したプログラム
/**********************************************************
マザーボードの8ビットスイッチがつながっているP2の各ビットを
直接見てみよう。
また，関数get8BitSW()が得る値を見てみよう。
**********************************************************/
#include <3048fone.h>
#include "h8_3048fone.h"

main()
{
    unsigned char sw1,sw2;
    initLed();
    initSCI1();
    init8BitSW();/*8bitSWの初期化*/
    while(1) {
        sw1=P2.DR.BYTE;
        sw2=get8BitSW();
        SCI1_printf("P2.DR.BYTE=%08b get8BitSW()=%08b\n",sw1,sw2);
    }
}

3.考察
実験した結果，下記表のようになった．
8bitSW	ON/OFF	赤ピンで触れたところ	黒ピンでふれたところ	電圧(V)	port番号	bit番号	ポートを直接見る	関数get8BitSW()
0		ON		 CN3-23					CN3-1					0		2			0		1					0
1		ON		 CN3-24					CN3-1					0		2			1		1					0
2		ON		 CN3-25					CN3-1					0		2			2		1					0
3		ON		 CN3-26					CN3-1					0		2			3		1					0
4		OFF		 CN3-27					CN3-1					5.2		2			4		0					1
5		OFF		 CN3-28					CN3-1					5.2		2			5		0					1
6		OFF		 CN3-29					CN3-1					5.2		2			6		0					1
7		OFF		 CN3-30					CN3-1					5.2		2			7		0					1


4.まとめ
CN3-1がGNDであることが分かった．
理論通り，スイッチがONでGNDに接続されているところは電圧が0Vであることが分かった．